<!-- Copying and distribution of this file, with or without modification,
    are permitted in any medium without royalty provided the copyright
    notice and this notice are preserved.  This file is offered as-is,
    without any warranty. -->
# Mapicom StreamDeck
![Скриншот приложения](/docs/assets/screenshot.webp)

Это приложение позволит Вам использовать Ваш планшет или другое мобильное устройство для быстрого управления функциями OBS Studio через встроенный WebSocket сервер.

Изначально это должно было быть простым веб-приложением, запускаемым в браузере, но ограничения Security Context не позволили это сделать, а запускать его через HTTPS не выйдет, так как WebSocket сервер в OBS работает в незащищенном режиме*. Поэтому это приложение использует Capacitor, позволяющий запускать его как нативное приложение для Android или iOS, хоть и через Web View.

*Тем не менее, можно использовать WebSocket соединение через HTTPS, хоть и через [туннелирование](https://github.com/obsproject/obs-websocket/wiki/SSL-Tunneling).

## Подготовка OBS Studio
Включите WebSocket сервер по этому пути:
1. Нажмите на кнопку меню "Сервис (T)" и выберите пункт "Настройки сервера WebSocket".
2. Установите пароль сервера в соответсвующем поле.
3. Установите желаемый порт или оставьте по умолчанию.
4. Поставьте галочку напротив пункта "Включить сервер WebSocket".
5. Нажмите ОК.
Очень рекомендуется установить пароль для подключения, особенно если Вы не единственный пользователь своей локальной сети.

## Написание файла конфигурации
Файл конфигурации содержит в себе кнопки (блоки), которые будут отображены на экране приложения, а также действия, которые они будут выполнять.

Конфигурация имеет простой синтаксис по примеру ниже:
```
block "Scene: Main" #27ae60 {
    SetCurrentScene "Main"
}

block "Microphone" #2980b9 {
    ToggleInputMute "Mic/Aux"
}
```

Каждый блок задаётся тремя словами: block, после пробела идёт его название в кавычках, и после ещё одного пробела задаётся цвет в виде HEX (# перед цветом обязательна). После чего ставится ещё один пробел и открывается фигурная скобка `{`.

Внутри блока по порядку идут команды, которые будут отправлять в OBS Studio. На данный момент список команд ограничен, но есть самые важные команды. Каждая команда занимает одну строку. Если аргумент содержит пробелы, он заносится в кавычки.

Название команд вдохновленно оригинальным наименованием в OBS WebSocket, но названия могут быть немного изменены.

Посмотрите текущий [список команд в `docs/COMMANDS.md`](docs/COMMANDS.md).

После написания команд для блока, на новой строке он закрывается фигурной скобкой `}`.

Название файла конфигурации должно заканчиваться расширением `.msds`.

## Сторонние библиотеки, используемый в этом проекте
* [Capacitor](https://capacitorjs.com/) и его официальные плагины.
* [obs-websocket-js](https://github.com/obs-websocket-community-projects/obs-websocket-js)
* [CodeMirror](https://codemirror.net/)
* [Vite](https://vite.dev/) для упаковки веб-приложения.
* [node-html-to-image](github.com/frinyvonnick/node-html-to-image) для рендеринга логотипа.
* ... и их зависимости.
